"use strict";(()=>{var y='<svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"/></svg>',w='<svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"/></svg>',b='<svg width="20" height="20" viewBox="0 0 15 15" fill="currentColor"><path d="M0.791840426,6.36849468 C1.20478723,6.36849468 1.50087766,6.05682979 1.50087766,5.64386702L1.50087766,4.98935638 L1.34505319,2.27004787 L3.3942766,4.42835638 L5.79411702,6.84378723C5.92657979,6.98403723 6.09799468,7.04638298 6.285,7.04638298C6.72912766,7.04638298 7.05638298,6.75807979 7.05638298,6.32173936C7.05638298,6.11137234 6.98625,5.92436702 6.846,5.78411702L4.43835638,3.38426064 L2.28004787,1.33503723 L5.00715957,1.49087766L5.65386702,1.49087766C6.06682979,1.49087766 6.38629787,1.20259043 6.38629787,0.781824468C6.38629787,0.361074468 6.07461702,0.065 5.65386702,0.065L1.32946277,0.065C0.534702128,0.065 0.075,0.524702128 0.075,1.31946277L0.075,5.64386702C0.075,6.04904255 0.37887766,6.36849468 0.791840426,6.36849468ZM9.33935106,14.9315957L13.6637553,14.9315957C14.4585319,14.9315957 14.9260851,14.4718888 14.9260851,13.677133L14.9260851,9.35272872C14.9260851,8.94755319 14.6220957,8.62810106 14.2014574,8.62810106C13.7962181,8.62810106 13.4923404,8.93976596 13.4923404,9.35272872L13.4923404,10.0072394 L13.6559681,12.7265431 L11.5989574,10.5682394 L9.2068883,8.15280851C9.07444149,8.01255851 8.8952234,7.95021277 8.70821809,7.95021277C8.27189362,7.95021277 7.93685106,8.23851596 7.93685106,8.67484043C7.93685106,8.8852234 8.01475532,9.07222872 8.15500532,9.21247872L10.5548617,11.6123255 L12.7209574,13.6615489 L9.9938617,13.5057149L9.33935106,13.5057149C8.9263883,13.5057149 8.60693617,13.7940085 8.60693617,14.2147617C8.60693617,14.6355149 8.9263883,14.9315957 9.33935106,14.9315957Z"/></svg>',T='<svg width="20" height="20" viewBox="0 0 16 16" fill="currentColor"><path d="M1.66493878,7.19582449L6.08936327,7.19582449C6.90250612,7.19582449 7.37285714,6.71750612 7.37285714,5.90436327L7.37285714,1.48792245C7.37285714,1.07337551 7.06195102,0.746518367 6.63943673,0.746518367C6.21692245,0.746518367 5.91398367,1.06540816 5.91398367,1.48792245L5.91398367,2.1575551 L6.08139592,4.93975918 L3.97680816,2.73153061 L1.52942857,0.260232653C1.39390204,0.116738776 1.21053878,0.045 1.01922449,0.045C0.56482449,0.045 0.23,0.347922449 0.23,0.794355102C0.23,1.00162041 0.309722449,1.20091837 0.453216327,1.34442857L2.90856327,3.79977551 L5.11679184,5.89639592 L2.33458776,5.73695102L1.66493878,5.73695102C1.24242449,5.73695102 0.915583673,6.03192245 0.915583673,6.46240408C0.915583673,6.88491837 1.23445714,7.19582449 1.66493878,7.19582449ZM9.31003265,15.2873412C9.73254694,15.2873412 10.0354857,14.9764351 10.0354857,14.5459502L10.0354857,13.7886168 L9.86807347,11.0143878 L11.9726612,13.2226098 L14.4758449,15.7417347C14.6113551,15.8852286 14.786702,15.9569837 14.986049,15.9569837C15.4324163,15.9569837 15.7672735,15.6540449 15.7672735,15.207622C15.7672735,15.0003518 15.6956,14.8010522 15.5520898,14.6575584L13.0409061,12.1463976 L10.8247102,10.0497837 L13.6148816,10.2092122L14.3722204,10.2092122C14.794702,10.2092122 15.1215592,9.91425714 15.1215592,9.49174286C15.1215592,9.06126122 14.802702,8.75832245 14.3722204,8.75832245L9.8600898,8.75832245C9.04696327,8.75832245 8.57661224,9.22867347 8.57661224,10.0418L8.57661224,14.5459502C8.57661224,14.9684645 8.87955102,15.2873412 9.31003265,15.2873412Z"/></svg>',E=(typeof CSS<"u"&&CSS.supports?.("hanging-punctuation","first"))??!1,L=E?b:y,S=E?T:w;function C(){if(!document.body.classList.contains("immersive-ready"))return;let r=document.querySelector("main > article.container");if(!r)return;let i=r.querySelector(":scope > iframe");if(!i)return;let e=document.createElement("div");e.className="immersive-iframe-wrapper";let t=document.createElement("button");t.type="button",t.className="immersive-fullscreen-btn",t.setAttribute("aria-label","Enter fullscreen"),t.innerHTML=L,i.parentNode.insertBefore(e,i),e.appendChild(i),e.appendChild(t);let o=!1,c=null;async function l(){if(o)return;let n=e.getBoundingClientRect();c=n;try{await document.documentElement.requestFullscreen?.()}catch{}document.body.classList.add("immersive-fs-active"),o=!0,t.innerHTML=S,t.setAttribute("aria-label","Exit fullscreen");let d=e.getBoundingClientRect(),u=n.left-d.left,g=n.top-d.top,h=d.width>0?n.width/d.width:1,f=d.height>0?n.height/d.height:1;e.style.transform=`translate(${u}px, ${g}px) scale(${h}, ${f})`,requestAnimationFrame(()=>{e.classList.add("fs-animating-enter"),e.style.transform="";function v(M){M.propertyName==="transform"&&(e.removeEventListener("transitionend",v),e.classList.remove("fs-animating-enter"))}e.addEventListener("transitionend",v)})}function s(){if(!(!o||!c)){if(document.fullscreenElement){document.exitFullscreen?.().catch(()=>{});return}a()}}function a(){if(!o||!c)return;let n=e.getBoundingClientRect(),d=c.left-n.left,u=c.top-n.top,g=n.width>0?c.width/n.width:1,h=n.height>0?c.height/n.height:1;e.classList.add("fs-animating-exit"),e.style.transform=`translate(${d}px, ${u}px) scale(${g}, ${h})`;function f(v){v.propertyName==="transform"&&(e.removeEventListener("transitionend",f),e.classList.remove("fs-animating-exit"),e.style.transform="",document.body.classList.remove("immersive-fs-active"),o=!1,t.innerHTML=L,t.setAttribute("aria-label","Enter fullscreen"))}e.addEventListener("transitionend",f)}function m(){o?s():l()}t.addEventListener("click",n=>{n.stopPropagation(),m()}),document.addEventListener("fullscreenchange",()=>{!document.fullscreenElement&&o&&a()}),document.addEventListener("keydown",n=>{n.key==="Escape"&&o&&!document.fullscreenElement&&(s(),n.preventDefault())}),window.addEventListener("message",n=>{n.data?.type==="moss-escape-key"&&o&&!document.fullscreenElement&&s()})}function x(){let r=document.documentElement,e=r.getAttribute("data-theme")==="dark"?"light":"dark";r.setAttribute("data-theme",e),localStorage.setItem("theme",e);let t=document.querySelector(".theme-toggle");t&&t.classList.toggle("theme-toggle--toggled",e==="dark")}function k(){let r=document.querySelector(".nav-links");r&&r.classList.toggle("mobile-open")}window.toggleTheme=x;window.toggleMobileMenu=k;document.addEventListener("click",function(r){let i=document.querySelector(".nav-links"),e=document.querySelector(".mobile-menu-button");if(i&&e&&i.classList.contains("mobile-open")){let t=r.target;!i.contains(t)&&!e.contains(t)&&i.classList.remove("mobile-open")}});function F(r,i){try{let e=document.createElement("canvas"),t=e.getContext("2d");if(!t){i(null);return}let o=10;e.width=o,e.height=o,t.drawImage(r,0,0,o,o);let l=t.getImageData(0,0,o,o).data,s=0,a=0,m=0,n=0;for(let h=0;h<l.length;h+=4)s+=l[h],a+=l[h+1],m+=l[h+2],n++;s=Math.round(s/n),a=Math.round(a/n),m=Math.round(m/n);let d=(s+a+m)/3,u=.6;s=Math.round(s*u+d*(1-u)),a=Math.round(a*u+d*(1-u)),m=Math.round(m*u+d*(1-u));let g=.7;s=Math.round(s*g),a=Math.round(a*g),m=Math.round(m*g),i(`rgb(${s}, ${a}, ${m})`)}catch{i(null)}}function p(){document.querySelectorAll(".collection-card").forEach(i=>{let e=i.querySelector(".collection-card-cover"),t=i.querySelector(".collection-card-content");if(!e||!t)return;let c=e.getAttribute("style")?.match(/url\(['"]?([^'"]+)['"]?\)/);if(!c)return;let l=new Image;l.crossOrigin="anonymous",l.onload=()=>{F(l,s=>{s&&(t.style.backgroundColor=s,t.style.color="rgba(255, 255, 255, 0.95)")})},l.src=c[1]})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",p):p();(function(){let r=window.matchMedia&&window.matchMedia("(prefers-color-scheme)").media!=="not all",i=!1;if(r)try{let o=window.matchMedia("(prefers-color-scheme: dark)");i=o.matches,o.addEventListener("change",function(c){if(!localStorage.getItem("theme")){let s=c.matches?"dark":"light";document.documentElement.setAttribute("data-theme",s);let a=document.querySelector(".theme-toggle");a&&a.classList.toggle("theme-toggle--toggled",s==="dark")}})}catch{i=!1}let t=localStorage.getItem("theme")||(i?"dark":"light");document.documentElement.setAttribute("data-theme",t),t==="dark"&&requestAnimationFrame(()=>{let o=document.querySelector(".theme-toggle");o&&o.classList.add("theme-toggle--toggled")})})();C();})();
